<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular Semestral EEPA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=League+Spartan:700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: #114087;
      color: #222;
      min-height: 100vh;
      font-family: 'Montserrat', Arial, sans-serif;
      overflow-x: auto;
      position: relative;
    }
    #btn-regresa {
      position: fixed;
      top: 12px;
      left: 12px;
      background: #ffffff;
      color: #114087;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 700;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 10000;
      user-select: none;
      transition: background-color 0.25s, color 0.25s;
    }
    #btn-regresa:hover, #btn-regresa:focus {
      background: #114087;
      color: #fff;
      outline: none;
    }
    /* Imagen header como banner a lo ancho */
    #header-image {
      width: 100vw;
      max-width: 100vw;
      min-width: 100vw;
      height: auto;
      display: block;
      margin: 0;
      user-select: none;
      border: 0;
      padding: 0;
      position: relative;
      left: 50%;
      right: 50%;
      transform: translateX(-50%);
    }
    /* Cuadro informativo blanco con texto azul entre header y columnas */
    .info-box {
      background-color: #ffffff;
      color: #114087;
      max-width: 1280px;
      margin: 1em auto 1em auto; /* margen arriba y abajo igualado a 1em */
      padding: 20px 25px;
      font-size: 1em;
      line-height: 1.5;
      user-select: none;
      box-sizing: border-box;
      font-family: 'Montserrat', Arial, sans-serif;
      border-radius: 12px; /* bordes redondeados */
      white-space: pre-line; /* Para respetar saltos de línea en texto */
    }
    .info-box p {
      margin: 0 0 0.75em 0;
    }
    /* Cambiado para filas de 3 columnas */
    .main-container {
      display: grid;
      grid-template-columns: repeat(3, minmax(250px, 1fr));
      grid-auto-rows: auto;
      grid-gap: 30px 30px;
      max-width: 1280px;
      margin: 0 auto 35px auto;
      padding: 0 10px;
      box-sizing: border-box;
      overflow-x: auto;
    }
    .vertical-column {
      display: flex;
      flex-direction: column;
      gap: 30px;
      min-width: 250px;
      max-width: 100%;
      box-sizing: border-box;
      align-items: stretch;
    }
    .column-block {
      background: #FFBD59;
      border-radius: 17px;
      padding: 23px 17px 20px 17px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.09);
      display: flex;
      flex-direction: column;
      align-items: stretch;
      flex-shrink: 0;
      min-height: 100px;
    }
    .upper-block {
      flex-grow: 0;
    }
    .lower-block {
      flex-grow: 1;
    }
    .col-title {
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 700;
      text-align: center;
      font-size: 1.21em;
      margin-bottom: 15px;
      color: #114087;
      text-transform: uppercase;
      letter-spacing: 1px;
      user-select: none;
    }
    button.asignatura, button.especial-btn {
      font-size: 1em;
      padding: 14px 13px;
      border: none;
      border-radius: 12px;
      background: #fff;
      margin-bottom: 14px;
      color: #114087;
      font-family: inherit;
      font-weight: 500;
      text-align: left;
      cursor: pointer;
      box-shadow: 0 1.5px 6px rgba(18, 39, 124, 0.08);
      transition: background 0.18s, color 0.18s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      outline: none;
      user-select: none;
    }
    button.asignatura[aria-disabled="true"], button.especial-btn[aria-disabled="true"] {
      cursor: not-allowed;
      background: #d1d1d151;
      color: #5871a0;
      opacity: 0.72;
    }
    button.asignatura.aprobada, button.especial-btn.aprobada {
      background: #114087 !important;
      color: white;
      text-decoration: line-through;
      font-weight: 700;
    }
    .uc-label, .especial-uc-label {
      font-size: 0.93em;
      padding-left: 7px;
      color: #114087b8;
      font-weight: 400;
      opacity: 0.82;
      flex-shrink: 0;
      user-select: none;
    }
    .tooltip {
      visibility: hidden;
      width: 240px;
      background-color: #222c44e2;
      color: #fff;
      text-align: left;
      border-radius: 8px;
      padding: 8px 13px;
      position: absolute;
      z-index: 9;
      left: 50%;
      bottom: 123%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.22s;
      font-size: 0.95em;
      font-family: 'Montserrat', Arial, sans-serif;
      pointer-events: none;
      user-select: none;
    }
    button.asignatura[aria-disabled="true"]:hover .tooltip,
    button.especial-btn[aria-disabled="true"]:hover .tooltip {
      visibility: visible;
      opacity: 1;
      pointer-events: auto;
    }
    .info-col {
      background: #fff;
      border-radius: 12px;
      color: #114087;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 500;
      font-size: 1em;
      padding: 16px 11px;
      box-shadow: 0 1.5px 6px #12277c18;
      display: flex;
      flex-direction: column;
      justify-content: center;
      white-space: normal;
      user-select: none;
      line-height: 1.5;
      min-height: 66px;
    }
    .info-col p {
      margin-top: 0;
      margin-bottom: 0;
      line-height: 1.4;
    }
    @media (max-width: 1280px) {
      .main-container {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        overflow-x: scroll;
      }
    }
    @media (max-width: 900px) {
      .main-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
        align-items: center;
      }
      .vertical-column {
        width: 100% !important;
        max-width: none !important;
      }
      #btn-regresa {
        position: static;
        margin: 10px auto 20px auto;
        display: block;
      }
      #header-image {
        width: 100vw;
        max-width: 100vw;
        min-width: 100vw;
        margin: 0;
      }
      .info-box {
        margin-top: 1em;
        padding: 15px 20px;
        font-size: 0.95em;
      }
    }
    .footer {
      text-align: center;
      margin: 20px 0 20px 0;
      opacity: 1;
      max-width: 680px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.35;
      user-select: none;
    }
    .footer img {
      display: block;
      margin: 0 auto;
      max-width: 320px;
      width: 100%;
      height: auto;
      opacity: 1;
    }
  </style>
</head>
<body>
  <button id="btn-regresa" type="button">Regresa a nuestra página</button>

  <!-- Imagen header a lo ancho arriba -->
  <img id="header-image" src="header mas.png" alt="Header MAS" />

  <!-- Cuadro blanco con instrucción entre header y columnas -->
  <div class="info-box"><strong>¿Cómo usarla?</strong>

    Haz click o presiona las materias que has aprobado; al aprobarlas, te mostrará cuáles puedes cursar en tu próximo semestre.

    También te muestra las materias que no puedes ver por prelaciones y las materias que necesitas aprobar para verlas.

    Elige tu mención (Politología, Relaciones Internacionales o Administración Pública) a partir del séptimo semestre y marca las materias correspondientes.
  </div>

  <div class="main-container" id="main-container">
    <!-- Diez semestres en filas de 3 columnas -->
    <div class="vertical-column" id="col-sem1">
      <div class="column-block upper-block" id="sem1-block"></div>
    </div>
    <div class="vertical-column" id="col-sem2">
      <div class="column-block upper-block" id="sem2-block"></div>
    </div>
    <div class="vertical-column" id="col-sem3">
      <div class="column-block upper-block" id="sem3-block"></div>
    </div>
    <div class="vertical-column" id="col-sem4">
      <div class="column-block upper-block" id="sem4-block"></div>
    </div>
    <div class="vertical-column" id="col-sem5">
      <div class="column-block upper-block" id="sem5-block"></div>
    </div>
    <div class="vertical-column" id="col-sem6">
      <div class="column-block upper-block" id="sem6-block"></div>
    </div>
    <div class="vertical-column" id="col-sem7-politologia" style="display:none;">
      <div class="column-block lower-block" id="sem7-politologia-block"></div>
    </div>
    <div class="vertical-column" id="col-sem7-relint" style="display:none;">
      <div class="column-block lower-block" id="sem7-relint-block"></div>
    </div>
    <div class="vertical-column" id="col-sem7-admin" style="display:none;">
      <div class="column-block lower-block" id="sem7-admin-block"></div>
    </div>
    <div class="vertical-column" id="col-sem8" >
      <div class="column-block lower-block" id="sem8-block"></div>
    </div>
    <div class="vertical-column" id="col-sem9" >
      <div class="column-block lower-block" id="sem9-block"></div>
    </div>
    <div class="vertical-column" id="col-sem10" >
      <div class="column-block lower-block" id="sem10-block"></div>
    </div>
  </div>

  <!-- Selector de mención -->
  <div style="max-width:1280px; margin:0 auto 20px auto; color: white; font-family: 'Montserrat', Arial, sans-serif; font-weight: 700; display:flex; justify-content:center; gap:15px; user-select:none;">
    <label><input type="radio" name="mencion" value="politologia" /> Politología</label>
    <label><input type="radio" name="mencion" value="relint" /> Relaciones Internacionales</label>
    <label><input type="radio" name="mencion" value="admin" /> Administración Pública</label>
  </div>

  <div class="footer">
    <img src="logo en blanco.png" alt="Logo Blanco UCV" />
  </div>

  <script>
    const SEMESTRES = [
      { semestre: "Primer Semestre", materias: [
          { id: "1547", nombre: "Técnicas de Estudio I", uc: 3 },
          { id: "1548", nombre: "Introducción a las Ciencias Sociales", uc: 3 },
          { id: "1549", nombre: "Introducción a las Estructuras Históricas I", uc: 4 },
          { id: "0535", nombre: "Introducción al Derecho", uc: 4 },
          { id: "0529", nombre: "Introducción a la Economía", uc: 3 },
        ]},
      { semestre: "Segundo Semestre", materias: [
          { id: "1553", nombre: "Técnicas de Estudio II", uc: 3, deps: ["1547"] },
          { id: "0528", nombre: "Introducción a la Teoría General de la Organización", uc: 3, deps: ["1548"] },
          { id: "0534", nombre: "Introducción a la Política", uc: 3, deps: ["1548"] },
          { id: "1554", nombre: "Introducción a las Estructuras Históricas II", uc: 4, deps: ["1549"] },
          { id: "1552", nombre: "Introducción al Estudio del Estado", uc: 4, deps: ["0535"] },
          { id: "2647", nombre: "Economía I", uc: 3, deps: ["0529"] },
        ]},
      { semestre: "Tercer Semestre", materias: [
          { id: "1546", nombre: "Estadística", uc: 3, deps: ["1553"] },
          { id: "2645a", nombre: "Sociología I", uc: 3, deps: ["1548"] },
          { id: "2645b", nombre: "Teoría General de la Organización I", uc: 3, deps: ["0528"] },
          { id: "2644", nombre: "Teoría Política I", uc: 6, deps: ["0534"] },
          { id: "1557", nombre: "Historia de las Formas Políticas Modernas", uc: 5, deps: ["1552"] },
        ]},
      { semestre: "Cuarto Semestre", materias: [
          { id: "0555", nombre: "Metodología de la Investigación Empírica", uc: 3, deps: ["1546","2645a"] },
          { id: "2642", nombre: "Teoría General de la Organización II", uc: 3, deps: ["2645b"] },
          { id: "2646", nombre: "Teoría Política II", uc: 4, deps: ["2644"] },
          { id: "1563", nombre: "Historia de las Ideas Políticas Modernas", uc: 5, deps: ["1557"] },
          { id: "1558", nombre: "Economía II", uc: 3, deps: ["2647"] },
        ]},
      { semestre: "Quinto Semestre", materias: [
          { id: "2629", nombre: "Estadística Superior", uc: 3, deps: ["0555"] },
          { id: "1565", nombre: "Sociología II", uc: 3, deps: ["2645a"] },
          { id: "2973", nombre: "Estructura Internacionales I", uc: 4, deps: ["0534"] },
          { id: "2626", nombre: "Teoría Política III", uc: 4, deps: ["2646"] },
          { id: "0551", nombre: "Estructuras Político Constitucionales Comparadas", uc: 3, deps: ["1557","2646"] },
          { id: "curso-monografico", nombre: "Curso Monográfico", uc: 3 },
        ]},
      { semestre: "Sexto Semestre", materias: [
          { id: "2581", nombre: "Matemática aplicada a la ciencia política", uc: 3, deps: ["2629"] },
          { id: "2974", nombre: "Estructuras Internacionales II", uc: 4, deps: ["2973"] },
          { id: "1569", nombre: "Sistema Político Venezolano", uc: 3, deps: ["2626","0551"] },
          { id: "0552", nombre: "Fundamentos de la Administración Pública", uc: 3, deps: ["1552"] },
          { id: "0554", nombre: "Historia de las Ideas y Movimientos Sociales Contemporáneos", uc: 3, deps: ["1554"] },
          { id: "seminario", nombre: "Seminario", uc: 3},
        ]},
    ];

    const MENCIONES = {
      politologia: {
        nombre: "Politología",
        sem7: [
          { id: "2576", nombre: "Estructura Política- Constitucional de América Latina", uc: 6, deps: ["0551"] },
          { id: "2578", nombre: "Sistemas Económicos Comparados", uc: 3, deps: ["1558"] },
          { id: "2579", nombre: "Filosofía Política", uc: 3, deps: ["0554"] },
        ],
        sem8: [
          { id: "2627", nombre: "Lectura de un clásico político", uc: 3, deps: ["2579"] },
        ],
        sem9: [
          { id: "0579", nombre: "Derecho Constitucional Venezolano", uc: 6, deps: ["1569"] },
          { id: "2635", nombre: "Teoría Del Estado", uc: 3, deps: ["2576"] },
        ],
        sem10: [
          { id: "2583", nombre: "Economía III", uc: 3, deps: ["1558"] },
          { id: "1567", nombre: "Psicología Social", uc: 3, deps: ["1565"] },
        ],
        monograficos: 11,
        seminarios: 5,
        electivas: 48,
      },
      relint: {
        nombre: "Relaciones Internacionales",
        sem7: [
          { id: "0587", nombre: "Derecho Internacional Público I", uc: 4, deps: ["2974"] },
          { id: "2975", nombre: "Historia de las Relaciones Internacionales", uc: 4, deps: [] },
          { id: "0588", nombre: "Teoría de las relaciones Internacionales", uc: 4, deps: ["2974"] },
        ],
        sem8: [
          { id: "0597", nombre: "Derecho Internacional Público II", uc: 3, deps: ["0587"] },
          { id: "2976", nombre: "Historia de las Relaciones Internacionales II", uc: 3, deps: ["2975"] },
          { id: "2978", nombre: "Historia Diplomática de Venezuela I", uc: 3, deps: ["1569"] },
        ],
        sem9: [
          { id: "2982", nombre: "Organizaciones Internacionales", uc: 4, deps: ["0597"] },
          { id: "2977", nombre: "Historia de las Relaciones Internacionales III", uc: 3, deps: ["2976"] },
          { id: "2980", nombre: "Relaciones Económicas Internacionales", uc: 5, deps: ["1558"] },
          { id: "0579", nombre: "Derecho Constitucional Venezolano", uc: 6, deps: ["1569"] },
        ],
        sem10: [
          { id: "2981", nombre: "Relaciones Económicas Internacionales II", uc: 3, deps: ["2980"] },
          { id: "2979", nombre: "Historia Diplomática de Venezuela II", uc: 3, deps: ["2978"] },
          { id: "0598", nombre: "Geografía Político - Económica", uc: 3, deps: ["1558"] },
          { id: "1567", nombre: "Psicología Social", uc: 3, deps: ["1565"] },
        ],
        monograficos: 6,
        seminarios: 5,
        electivas: 33,
      },
      admin: {
        nombre: "Administración Pública",
        sem7: [
          { id: "0573", nombre: "Derecho Administrativo", uc: 6, deps: ["0552"] },
          { id: "0574", nombre: "Finanzas Públicas I", uc: 3, deps: ["1558"] },
        ],
        sem8: [
          { id: "2631", nombre: "Finanzas Públicas II", uc: 6, deps: ["0574"] },
        ],
        sem9: [
          { id: "0608", nombre: "Organización Administrativa Venezolana", uc: 3, deps: ["0573"] },
          { id: "2634", nombre: "Procedimientos Administrativos", uc: 4, deps: ["0573"] },
          { id: "0579", nombre: "Derecho Constitucional Venezolano", uc: 6, deps: ["1569"] },
        ],
        sem10: [
          { id: "1567", nombre: "Psicología Social", uc: 3, deps: ["1565"] },
          { id: "2583", nombre: "Economía III", uc: 3, deps: ["1558"] },
        ],
        monograficos: 10,
        seminarios: 6,
        electivas: 48,
      },
    };

    const ESPECIALES = [
      { id: "curso-monografico", nombre: "Curso Monográfico", uc: 3 },
      { id: "seminario", nombre: "Seminario", uc: 3 },
    ];

    const STORAGE_KEY = "eepa_semestres_aprobados";

    function obtenerAprobadas() {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
      } catch {
        return [];
      }
    }

    function guardarAprobadas(aprobadas) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(aprobadas));
    }

    function getMateriaPorId(id) {
      for (const semestre of SEMESTRES) {
        const encontrada = semestre.materias.find(m => m.id === id);
        if (encontrada) return encontrada;
      }
      for (const m of Object.values(MENCIONES)) {
        for (const key of ["sem7","sem8","sem9","sem10"]) {
          const encontrada = m[key].find(mat => mat.id === id);
          if (encontrada) return encontrada;
        }
      }
      return ESPECIALES.find(esp => esp.id === id) || null;
    }

    function requisitosNoAprobados(materia, aprobadas) {
      if (!materia.deps) return [];
      return materia.deps.filter(reqId => !aprobadas.includes(reqId));
    }

    function calcCreditosAprobados(aprobadas) {
      let total = 0;
      aprobadas.forEach(id => {
        const mat = getMateriaPorId(id);
        if (mat && mat.uc) total += mat.uc;
      });
      return total;
    }

    function crearBotonMateria(materia) {
      const aprobadas = obtenerAprobadas();
      const reqsNoAprob = requisitosNoAprobados(materia, aprobadas);
      const bloqueada = reqsNoAprob.length > 0;
      const btn = document.createElement("button");
      btn.className = "asignatura";
      btn.setAttribute("data-id", materia.id);
      btn.tabIndex = 0;
      btn.innerHTML = `<span>${materia.nombre}</span><span class="uc-label">${materia.uc} UC</span>`;
      if (aprobadas.includes(materia.id)) {
        btn.classList.add("aprobada");
        btn.setAttribute("aria-pressed", "true");
      } else {
        btn.setAttribute("aria-pressed", "false");
      }
      if (bloqueada) {
        btn.setAttribute("aria-disabled", "true");
        btn.tabIndex = -1;
        const tooltip = document.createElement("span");
        tooltip.className = "tooltip";
        const textosFaltan = reqsNoAprob.map(id => {
          const m = getMateriaPorId(id);
          return m ? m.nombre : id;
        });
        tooltip.textContent = `Debes aprobar primero: ${textosFaltan.join(", ")}`;
        btn.appendChild(tooltip);
      } else {
        btn.removeAttribute("aria-disabled");
        btn.addEventListener("click", () => toggleAprobada(materia.id));
      }
      return btn;
    }

    function renderSemestres() {
      ['sem1-block','sem2-block','sem3-block','sem4-block','sem5-block','sem6-block'].forEach(id => {
        document.getElementById(id).innerHTML = '';
      });

      for (let i = 0; i < SEMESTRES.length; i++) {
        const bloque = SEMESTRES[i];
        const cont = document.getElementById(`sem${i+1}-block`);
        if (cont) {
          cont.insertAdjacentHTML('beforeend', `<div class="col-title">${bloque.semestre}</div>`);
          bloque.materias.forEach(mat => {
            cont.appendChild(crearBotonMateria(mat));
          });
        }
      }
    }

    function renderMencion(mencion) {
      document.getElementById('col-sem7-politologia').style.display = 'none';
      document.getElementById('col-sem7-relint').style.display = 'none';
      document.getElementById('col-sem7-admin').style.display = 'none';

      const cont7Pol = document.getElementById('sem7-politologia-block');
      const cont7Rel = document.getElementById('sem7-relint-block');
      const cont7Adm = document.getElementById('sem7-admin-block');
      const cont8 = document.getElementById('sem8-block');
      const cont9 = document.getElementById('sem9-block');
      const cont10 = document.getElementById('sem10-block');

      cont7Pol.innerHTML = '';
      cont7Rel.innerHTML = '';
      cont7Adm.innerHTML = '';
      cont8.innerHTML = '';
      cont9.innerHTML = '';
      cont10.innerHTML = '';

      const aprobadas = obtenerAprobadas();
      const datosMencion = MENCIONES[mencion];

      if (!datosMencion) {
        cont8.parentElement.style.display = 'none';
        cont9.parentElement.style.display = 'none';
        cont10.parentElement.style.display = 'none';
        return;
      }

      cont8.parentElement.style.display = 'block';
      cont9.parentElement.style.display = 'block';
      cont10.parentElement.style.display = 'block';

      if(mencion === 'politologia') {
        document.getElementById('col-sem7-politologia').style.display = 'flex';
        cont7Pol.insertAdjacentHTML('beforeend', `<div class="col-title">Séptimo Semestre - Politología</div>`);
        datosMencion.sem7.forEach(m => cont7Pol.appendChild(crearBotonMateria(m)));

        cont8.insertAdjacentHTML('beforeend', `<div class="col-title">Octavo Semestre - Politología</div>`);
        datosMencion.sem8.forEach(m => cont8.appendChild(crearBotonMateria(m)));

        cont9.insertAdjacentHTML('beforeend', `<div class="col-title">Noveno Semestre - Politología</div>`);
        datosMencion.sem9.forEach(m => cont9.appendChild(crearBotonMateria(m)));

        cont10.insertAdjacentHTML('beforeend', `<div class="col-title">Décimo Semestre - Politología</div>`);
        datosMencion.sem10.forEach(m => cont10.appendChild(crearBotonMateria(m)));

      } else if(mencion === 'relint') {
        document.getElementById('col-sem7-relint').style.display = 'flex';
        cont7Rel.insertAdjacentHTML('beforeend', `<div class="col-title">Séptimo Semestre - Relaciones Internacionales</div>`);
        datosMencion.sem7.forEach(m => cont7Rel.appendChild(crearBotonMateria(m)));

        cont8.insertAdjacentHTML('beforeend', `<div class="col-title">Octavo Semestre - Relaciones Internacionales</div>`);
        datosMencion.sem8.forEach(m => cont8.appendChild(crearBotonMateria(m)));

        cont9.insertAdjacentHTML('beforeend', `<div class="col-title">Noveno Semestre - Relaciones Internacionales</div>`);
        datosMencion.sem9.forEach(m => cont9.appendChild(crearBotonMateria(m)));

        cont10.insertAdjacentHTML('beforeend', `<div class="col-title">Décimo Semestre - Relaciones Internacionales</div>`);
        datosMencion.sem10.forEach(m => cont10.appendChild(crearBotonMateria(m)));

      } else if(mencion === 'admin') {
        document.getElementById('col-sem7-admin').style.display = 'flex';
        cont7Adm.insertAdjacentHTML('beforeend', `<div class="col-title">Séptimo Semestre - Administración Pública</div>`);
        datosMencion.sem7.forEach(m => cont7Adm.appendChild(crearBotonMateria(m)));

        cont8.insertAdjacentHTML('beforeend', `<div class="col-title">Octavo Semestre - Administración Pública</div>`);
        datosMencion.sem8.forEach(m => cont8.appendChild(crearBotonMateria(m)));

        cont9.insertAdjacentHTML('beforeend', `<div class="col-title">Noveno Semestre - Administración Pública</div>`);
        datosMencion.sem9.forEach(m => cont9.appendChild(crearBotonMateria(m)));

        cont10.insertAdjacentHTML('beforeend', `<div class="col-title">Décimo Semestre - Administración Pública</div>`);
        datosMencion.sem10.forEach(m => cont10.appendChild(crearBotonMateria(m)));
      }

      if(cont10) {
        const infoDiv = document.createElement('div');
        infoDiv.className = 'info-col';
        infoDiv.innerHTML = `
          <p><b>Graduación:</b> Debes aprobar todos los cursos monográficos, seminarios y obtener créditos electivos indicados:</p>
          <p>Monográficos: ${datosMencion.monograficos}</p>
          <p>Seminarios: ${datosMencion.seminarios}</p>
          <p>Créditos Electivos: ${datosMencion.electivas}</p>
        `;
        cont10.appendChild(infoDiv);
      }
    }

    function toggleAprobada(id) {
      let aprobadas = obtenerAprobadas();
      if (aprobadas.includes(id)) {
        aprobadas = aprobadas.filter(i => i !== id);
      } else {
        aprobadas.push(id);
      }
      guardarAprobadas(aprobadas);
      renderMallaCompleta();
    }

    function renderMallaCompleta() {
      renderSemestres();

      const radios = document.querySelectorAll('input[name="mencion"]');
      let mencionSeleccionada = null;
      radios.forEach(r => {
        if (r.checked) mencionSeleccionada = r.value;
      });

      if (mencionSeleccionada) {
        renderMencion(mencionSeleccionada);
      } else {
        document.getElementById('col-sem7-politologia').style.display = 'none';
        document.getElementById('col-sem7-relint').style.display = 'none';
        document.getElementById('col-sem7-admin').style.display = 'none';
        document.getElementById('sem8-block').parentElement.style.display = 'none';
        document.getElementById('sem9-block').parentElement.style.display = 'none';
        document.getElementById('sem10-block').parentElement.style.display = 'none';

        ['sem7-politologia-block','sem7-relint-block','sem7-admin-block','sem8-block','sem9-block','sem10-block'].forEach(id => {
          const c = document.getElementById(id);
          if(c) c.innerHTML = '';
        });
      }
    }

    document.querySelectorAll('input[name="mencion"]').forEach(radio => {
      radio.addEventListener('change', () => {
        renderMallaCompleta();
      });
    });

    document.getElementById('btn-regresa').addEventListener('click', () => {
      window.location.href = 'https://sites.google.com/view/masestudiantilucv/inicio';
    });

    document.querySelector('body').addEventListener('dblclick', (e) => {
      if (e.shiftKey) {
        if (confirm('¿Seguro que deseas borrar todo el progreso guardado?')) {
          localStorage.removeItem(STORAGE_KEY);
          renderMallaCompleta();
        }
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      renderMallaCompleta();
    });
  </script>
</body>
</html>
